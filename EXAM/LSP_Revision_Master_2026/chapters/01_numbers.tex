% ==============================================================================
% 第一章: 数值系统 - 计算器流，拒绝二进制！
% ==============================================================================
\section{数值系统 (计算器流)}

\begin{hack}[核心思想：十进制算完再转！]
\textbf{别傻乎乎转二进制算了！}

用十进制算，最后一步再处理溢出。
\end{hack}

\subsection{2的幂次表 (背下来！)}

\begin{center}
\begin{tabular}{|c|c||c|c||c|c|}
\hline
$2^4$ & 16 & $2^8$ & 256 & $2^{12}$ & 4096 \\
\hline
$2^5$ & 32 & $2^9$ & 512 & $2^{14}$ & 16384 \\
\hline
$2^6$ & 64 & $2^{10}$ & 1024 & $2^{16}$ & 65536 \\
\hline
$2^7$ & 128 & $2^{11}$ & 2048 & $2^{20}$ & 1M \\
\hline
\end{tabular}
\end{center}

\subsection{N位数范围 (必背)}

\begin{formula}[范围速记]
\begin{itemize}
\item \textbf{Unsigned:} $[0, 2^N-1]$
\item \textbf{Signed:} $[-2^{N-1}, 2^{N-1}-1]$
\end{itemize}

\textbf{常用：}
\begin{itemize}
\item 8位Signed: $[-128, +127]$
\item 10位Signed: $[-512, +511]$
\item 16位Signed: $[-32768, +32767]$
\end{itemize}
\end{formula}

\subsection{无符号溢出}

\begin{hack}[Unsigned溢出 - 直接取模！]
\textbf{无脑公式：} 结果 = (十进制结果) \% $2^N$

\vspace{3pt}
\textbf{例：} 8位Unsigned，计算 $200 + 100$
\begin{enumerate}
\item 十进制：$200 + 100 = 300$
\item 取模：$300 \mod 256 = 300 - 256 = 44$
\item \textbf{答案：44}
\end{enumerate}

就这么简单，不用转二进制！
\end{hack}

\subsection{有符号溢出}

\begin{hack}[Signed溢出 - 超了就减！]
\textbf{无脑三步：}
\begin{enumerate}
\item 先用十进制算出结果 $R$
\item 判断：$R > 2^{N-1}-1$ (最大正数)？
\item 如果超了：$R - 2^N$ = 最终答案
\end{enumerate}

\vspace{3pt}
\textbf{例：} 10位Signed，计算 $511 + 511$
\begin{enumerate}
\item 十进制：$511 + 511 = 1022$
\item 判断：$1022 > 511$？是的！溢出了！
\item 操作：$1022 - 1024 = -2$
\item \textbf{答案：$-2$}
\end{enumerate}

\textbf{反向也一样：}如果 $R < -2^{N-1}$，就加 $2^N$
\end{hack}

\subsection{负数转补码}

\begin{hack}[负数补码 - 不用取反加1！]
\textbf{Pro Way公式：} $-X$ 的补码 = $2^N - X$

\vspace{3pt}
\textbf{例：} 8位表示 $-5$
\begin{enumerate}
\item 计算：$256 - 5 = 251$
\item 转二进制：$251 = 128+64+32+16+8+2+1$
\item \textbf{答案：\texttt{11111011}}
\end{enumerate}

比``取反加1''快多了！
\end{hack}

\subsection{补码转十进制}

\begin{hack}[看MSB定正负！]
\textbf{看最高位：}
\begin{itemize}
\item MSB=0？正数，直接转
\item MSB=1？负数，用公式
\end{itemize}

\textbf{负数公式：} 值 = 二进制值 $- 2^N$

\vspace{3pt}
\textbf{例：} 8位 \texttt{11110100}
\begin{enumerate}
\item MSB=1，是负数
\item 先当正数算：$128+64+32+16+4 = 244$
\item 减去$2^8$：$244 - 256 = -12$
\item \textbf{答案：$-12$}
\end{enumerate}
\end{hack}

\subsection{符号扩展}

\begin{hack}[扩展位数 - 抄符号位！]
\textbf{Unsigned：} 高位全补0

\textbf{Signed：} 高位抄MSB
\begin{itemize}
\item 正数(MSB=0)：补0
\item 负数(MSB=1)：补1
\end{itemize}

\textbf{例：} 4位$\to$8位
\begin{itemize}
\item \texttt{0110}(+6) $\to$ \texttt{0000 0110}
\item \texttt{1010}(-6) $\to$ \texttt{1111 1010}
\end{itemize}
\end{hack}

\begin{pitfall}[送分题别丢分]
\begin{itemize}
\item 看清题目问的是Signed还是Unsigned
\item 看清位数！8位和10位范围不一样
\item 计算器按对！$2^{10}=1024$不是1000
\end{itemize}
\end{pitfall}
